var _0x35e2 = ['second', 'glucoseConcentration', 'exports', '00002A52-0000-1000-8000-00805F9B34FB', '00002A18-0000-1000-8000-00805F9B34FB', '00002A34-0000-1000-8000-00805F9B34FB', 'openBluetoothAdapter', 'startBluetoothDevicesDiscovery', 'onBluetoothDeviceFound', 'devices', 'forEach', 'name', 'localName', 'deviceId', 'indexOf', 'meter', 'Accu', 'push', 'length', 'createBLEConnection', 'closeBLEConnection', 'stopBluetoothDevicesDiscovery', 'getBLEDeviceServices', 'services', 'isPrimary', 'getBLEDeviceCharacteristics', 'characteristics', 'uuid', 'splice', 'setUint8', '写入成功\x0a', 'onBLECharacteristicValueChange', 'characteristicId', 'value', 'sequence', 'log', '读取2034', '写入失败\x0a', 'getUint8', 'getUint16', 'setFullYear', 'setMinutes', 'setSeconds', 'getInt16', 'year', 'month', 'day', 'hour']; (function (_0x3e4914, _0x484909) { var _0x226e23 = function (_0x1d1ccd) { while (--_0x1d1ccd) { _0x3e4914['push'](_0x3e4914['shift']()); } }; _0x226e23(++_0x484909); }(_0x35e2, 0x93)); var _0x8308 = function (_0x3a5cf3, _0xd6ed97) { _0x3a5cf3 = _0x3a5cf3 - 0x0; var _0x4a1fcc = _0x35e2[_0x3a5cf3]; return _0x4a1fcc; }; const foundDevices = []; const glucoseList = []; const mealStatusList = []; const writeCharacteristicId = _0x8308('0x0'); const notifyCharacteristicId = _0x8308('0x1'); const notifyCharacteristicId1 = _0x8308('0x2'); function searchRoche(_0x2b1042, _0x224ce5) { wx[_0x8308('0x3')]({ 'success': function (_0x37090a) { wx[_0x8308('0x4')]({ 'allowDuplicatesKey': !![], 'services': [], 'success': function (_0x37090a) { wx[_0x8308('0x5')](function (_0x37090a) { _0x37090a[_0x8308('0x6')][_0x8308('0x7')](function (_0x4ecaee) { if (!_0x4ecaee[_0x8308('0x8')] && !_0x4ecaee[_0x8308('0x9')]) { return; } const _0x23b79c = inArray(foundDevices, _0x8308('0xa'), _0x4ecaee[_0x8308('0xa')]); if (_0x23b79c === -0x1) { if (_0x4ecaee[_0x8308('0x8')][_0x8308('0xb')](_0x8308('0xc')) != -0x1 || _0x4ecaee[_0x8308('0x8')][_0x8308('0xb')](_0x8308('0xd')) != -0x1) { foundDevices[_0x8308('0xe')](_0x4ecaee); } } _0x2b1042(foundDevices); }); }); }, 'fail': function (_0x37090a) { _0x224ce5(_0x37090a); } }); }, 'fail': function (_0x38429a) { _0x224ce5(_0x38429a); } }); } function inArray(_0x568b3b, _0x41ddf8, _0x460508) { for (let _0x2c19e1 = 0x0; _0x2c19e1 < _0x568b3b[_0x8308('0xf')]; _0x2c19e1++) { if (_0x568b3b[_0x2c19e1][_0x41ddf8] === _0x460508) { return _0x2c19e1; } } return -0x1; } function pair(_0x15264b, _0x26ee7d, _0x5db32f) { wx[_0x8308('0x10')]({ 'deviceId': _0x15264b, 'success': function (_0x2c9f35) { getBLEDeviceServices(_0x15264b, _0x26ee7d, _0x5db32f); }, 'fail': function (_0xa96d52) { _0x5db32f(_0xa96d52); wx[_0x8308('0x11')]({ 'deviceId': _0x15264b }); } }); wx[_0x8308('0x12')](); } function getBLEDeviceServices(_0x3def28, _0xcd1ef6, _0x85ef8e) { wx[_0x8308('0x13')]({ 'deviceId': _0x3def28, 'success': function (_0x23e2b8) { for (let _0x458484 = 0x0; _0x458484 < _0x23e2b8[_0x8308('0x14')][_0x8308('0xf')]; _0x458484++) { if (_0x23e2b8['services'][_0x458484][_0x8308('0x15')]) { var _0x1d0ecd = _0x23e2b8[_0x8308('0x14')][_0x458484]['uuid']; _0xcd1ef6(_0x1d0ecd); return; } } }, 'fail': function (_0x112713) { _0x85ef8e(_0x112713); } }); } function getBLEDeviceCharacteristics(_0x3d4e3e, _0x161224, _0x4d1bf4, _0x29371f) { wx[_0x8308('0x16')]({ 'deviceId': _0x3d4e3e, 'serviceId': _0x161224, 'success': function (_0x5ef7a9) { for (let _0x508b95 = 0x0; _0x508b95 < _0x5ef7a9[_0x8308('0x17')][_0x8308('0xf')]; _0x508b95++) { let _0x177901 = _0x5ef7a9['characteristics'][_0x508b95]; if (_0x177901[_0x8308('0x18')] == writeCharacteristicId) { notifyBLECharacteristicValueChange(_0x3d4e3e, _0x161224, _0x177901[_0x8308('0x18')], _0x4d1bf4, _0x29371f); } if (_0x177901['uuid'] == notifyCharacteristicId1) { notifyBLECharacteristicValueChange(_0x3d4e3e, _0x161224, _0x177901[_0x8308('0x18')], _0x4d1bf4, _0x29371f); } if (_0x177901[_0x8308('0x18')] == notifyCharacteristicId) { notifyBLECharacteristicValueChange(_0x3d4e3e, _0x161224, _0x177901[_0x8308('0x18')], _0x4d1bf4, _0x29371f); } } }, 'fail': function (_0x35e927) { _0x29371f(_0x35e927); } }); } function notifyBLECharacteristicValueChange(_0x1151d1, _0x17cdef, _0x17ac0a, _0x12ded0, _0x118e95) { wx['notifyBLECharacteristicValueChange']({ 'state': !![], 'deviceId': _0x1151d1, 'serviceId': _0x17cdef, 'characteristicId': _0x17ac0a, 'success': function (_0x1ffe3d) { _0x12ded0(_0x1ffe3d); }, 'fail': function (_0x2d0bb7) { _0x118e95(_0x2d0bb7); } }); } function syncData(_0x137a66, _0x286613, _0x54b5c7, _0x59788c, _0x138fc0) { if (glucoseList[_0x8308('0xf')] > 0x0) { glucoseList[_0x8308('0x19')](0x0, glucoseList[_0x8308('0xf')]); }; if (mealStatusList[_0x8308('0xf')] > 0x0) { mealStatusList[_0x8308('0x19')](0x0, mealStatusList[_0x8308('0xf')]); }; let _0x3ecd7e = new ArrayBuffer(0x2); let _0x18b3c7 = new DataView(_0x3ecd7e); _0x18b3c7['setUint8'](0x0, 0x1); _0x18b3c7[_0x8308('0x1a')](0x1, 0x1); wx['writeBLECharacteristicValue']({ 'deviceId': _0x137a66, 'serviceId': _0x286613, 'characteristicId': writeCharacteristicId, 'value': _0x3ecd7e, 'success': function (_0x569ab3) { console['log'](_0x8308('0x1b')); wx[_0x8308('0x1c')](function (_0x569ab3) { if (_0x569ab3[_0x8308('0x1d')] == notifyCharacteristicId) { var _0x16bd60 = glucoseReadingRx(_0x569ab3[_0x8308('0x1e')]); const _0x3b65b6 = inArray(glucoseList, 'sequence', _0x16bd60[_0x8308('0x1f')]); if (_0x3b65b6 === -0x1) { glucoseList[_0x8308('0xe')](_0x16bd60); } console['log']('读取2018'); } if (_0x569ab3[_0x8308('0x1d')] == notifyCharacteristicId1) { var _0x16bd60 = mealStatusReadingRx(_0x569ab3[_0x8308('0x1e')]); const _0xf3278c = inArray(mealStatusList, 'sequence', _0x16bd60['sequence']); if (_0xf3278c === -0x1) { mealStatusList[_0x8308('0xe')](_0x16bd60); } } if (_0x569ab3[_0x8308('0x1d')] == writeCharacteristicId) { console[_0x8308('0x20')](_0x8308('0x21')); setTimeout(function () { _0x54b5c7(glucoseList); _0x59788c(mealStatusList); }, 0x3e8); } }); }, 'fail': function (_0x18f1db) { console[_0x8308('0x20')](_0x8308('0x22')); _0x138fc0(_0x18f1db); } }); } function glucoseReadingRx(_0x1e67dd) { var _0x4b4b13 = new Object(); let _0x1bdb0b = new DataView(_0x1e67dd); var _0xfc0604 = 0x0; var _0x459371 = _0x1bdb0b[_0x8308('0x23')](0x0); _0xfc0604 += 0x1; var _0x57d475 = 0x0; var _0x2aca46 = (_0x459371 & 0x1) > 0x0; var _0x28d7d9 = 0x0; var _0x4316db = (_0x459371 & 0x2) > 0x0; var _0x55ed56 = (_0x459371 & 0x4) == 0x0; var _0x54b66c = (_0x459371 & 0x8) > 0x0; var _0xa34cfa = _0x1bdb0b[_0x8308('0x24')](_0xfc0604, !![]); _0xfc0604 += 0x2; var _0x4719a6 = _0x1bdb0b[_0x8308('0x24')](_0xfc0604, !![]); var _0x55c05a = _0x1bdb0b[_0x8308('0x23')](_0xfc0604 + 0x2); var _0x21be03 = _0x1bdb0b[_0x8308('0x23')](_0xfc0604 + 0x3); var _0x1a8852 = _0x1bdb0b['getUint8'](_0xfc0604 + 0x4); var _0x214445 = _0x1bdb0b['getUint8'](_0xfc0604 + 0x5); var _0x10edca = _0x1bdb0b[_0x8308('0x23')](_0xfc0604 + 0x6); _0xfc0604 += 0x7; var _0x329055 = new Date(); _0x329055[_0x8308('0x25')](_0x4719a6, _0x55c05a - 0x1, _0x21be03); _0x329055['setHours'](_0x1a8852); _0x329055[_0x8308('0x26')](_0x214445); _0x329055[_0x8308('0x27')](_0x10edca); if (_0x2aca46) { _0x28d7d9 = _0x1bdb0b[_0x8308('0x28')](_0xfc0604, !![]); _0xfc0604 += 0x2; } if (_0x4316db) { var _0x3f7b6f = _0x1bdb0b[_0x8308('0x24')](_0xfc0604, !![]); var _0x3f7b6f = getSfloat16(_0x1bdb0b[_0x8308('0x23')](_0xfc0604), _0x1bdb0b[_0x8308('0x23')](_0xfc0604 + 0x1)); _0x57d475 = _0x3f7b6f * 0x186a0 / 0x12; _0xfc0604 += 0x3; } if (_0x54b66c) { var _0x4518de = _0x1bdb0b[_0x8308('0x24')](_0xfc0604, !![]); } _0x4b4b13[_0x8308('0x1f')] = _0xa34cfa; _0x4b4b13[_0x8308('0x29')] = _0x4719a6; _0x4b4b13[_0x8308('0x2a')] = _0x55c05a; _0x4b4b13[_0x8308('0x2b')] = _0x21be03; _0x4b4b13[_0x8308('0x2c')] = _0x1a8852; _0x4b4b13['minute'] = _0x214445; _0x4b4b13[_0x8308('0x2d')] = _0x10edca; _0x4b4b13['timeOffset'] = _0x28d7d9; _0x4b4b13[_0x8308('0x2e')] = _0x57d475; return _0x4b4b13; } function mealStatusReadingRx(_0x17cc49) { var _0x18bae7 = new Object(); let _0x16139e = new DataView(_0x17cc49); var _0x1cba94 = _0x16139e[_0x8308('0x24')](0x1, !![]); var _0x513eeb = _0x16139e[_0x8308('0x23')](0x3); _0x18bae7[_0x8308('0x1f')] = _0x1cba94; _0x18bae7['mealData'] = _0x513eeb; return _0x18bae7; } function getSfloat16(_0x5b10c4, _0x323ae5) { var _0x50c9be = unsignedToSigned(unsignedByteToInt(_0x5b10c4) + ((unsignedByteToInt(_0x323ae5) & 0xf) << 0x8), 0xc); var _0x333f8a = unsignedToSigned(unsignedByteToInt(_0x323ae5) >> 0x4, 0x4); return _0x50c9be * Math['pow'](0xa, _0x333f8a); } function unsignedByteToInt(_0x3176b4) { return _0x3176b4 & 0xff; } function unsignedBytesToInt(_0x4e76ec, _0x206aa8) { return (unsignedByteToInt(_0x206aa8) << 0x8) + unsignedByteToInt(_0x4e76ec) & 0xffff; } function unsignedToSigned(_0x362743, _0x53b5b7) { if ((_0x362743 & 0x1 << _0x53b5b7 - 0x1) != 0x0) { _0x362743 = -0x1 * ((0x1 << _0x53b5b7 - 0x1) - (_0x362743 & (0x1 << _0x53b5b7 - 0x1) - 0x1)); } return _0x362743; } module[_0x8308('0x2f')] = { 'searchRoche': searchRoche, 'pair': pair, 'syncData': syncData, 'getBLEDeviceServices': getBLEDeviceServices, 'getBLEDeviceCharacteristics': getBLEDeviceCharacteristics };